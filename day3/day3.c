#include <stdio.h>
#include <time.h>

#define LINE_LEN 31

static const char INPUT[] =
    "...#...#....#....##...###....#."
    "#.#...#...#....#.........#..#.."
    ".#....##..#.#..##..##.........."
    ".....#.#.............#..#......"
    ".......#...#.##.#......#..#.#.."
    "#.#....#......##........##....."
    ".....##.#....#..#...#...##...#."
    "...#...#..#.......#..#...##...#"
    "..........#...........##......."
    "..#..#..#...................#.."
    "#..#....#.....##.#.#..........#"
    ".#.##.......###.....#.#...#...."
    ".#..##....##....#.......#...###"
    "#.#..##...#.#..#..............."
    ".........#....#.......##.#.#..."
    "...###...##....##...#..##.#..#."
    "....#.........#..#...#.......#."
    "....................#..#.#.#..."
    "..#....#..........#...........#"
    ".#.....#..#.....##........##..#"
    "#..##..#...##............#..##."
    ".#..##....#..........#..#.##.#."
    "..#####..#.#............##....."
    "...###.#....##..#.#....#.....#."
    ".#.......##....#...#.#.....##.."
    "...#....#...##.#...#..#........"
    ".####.....#....#.#.#...#......."
    "...#....#.....#.......#........"
    "#..#.#.......#...#............#"
    "...#.....###.##....#.#.###.#..."
    ".#.........#.......#.#....##..."
    "#.#..#...#.#...##......#..#...."
    ".....#...#..#.#...#..###..#...."
    "......#.........#...###........"
    ".....#..##...#..........#.....#"
    "..#..#.#.##.#...#....#....##..#"
    "##....#.##...#.##.#..##....#..."
    ".....#.#.#.#..#....##.#...#.#.."
    ".....##.......#........#......."
    "...#.#.....#...#...##.#......##"
    "........#..#.#...#.#.....#.#..#"
    "#..##...#.#...##..##...#.#...##"
    ".##.#.#..#...#.....#.#.##.#...#"
    ".#.####.........##.........#..#"
    ".##..............#....#...#...#"
    "......#...#..#...#..#..###.#..."
    ".......##...#.#.#..##..#......#"
    ".....#....#..##..#.........#..."
    ".....#..#.#.#........#.#.####.."
    "#..#.......###....##..........."
    "#..##..........#.#......#.#...."
    ".....##........#...#..##......."
    "###...#.##.#.#.#.#.##...##....."
    "....#...#........##.#.##..##..."
    ".#..#.#.#......#.......##..#..#"
    ".#...#.................#....#.."
    ".##..#..........#..##.......#.."
    ".#.#.#.....#..#.#.........##..#"
    "...#......##...#.......#...##.."
    "##...###....#.###.............#"
    "#.....#.#..#.#..#........#.#.#."
    ".....#.#......##..#.#.....#.##."
    ".......#...........#..#.......#"
    "..#....#.#.#......#.....#...#.."
    ".....##........#..##..#..##...."
    "#.#........#...##....#.#..##..."
    "#......#......#....#..#...#.##."
    "....#.#.......#.#.#............"
    "......####.#.##...#.#.##.....##"
    "..###.#.#..#.........#.####...."
    ".#.......#..#.#....#.#..#.#.##."
    "#....#....#............##...##."
    "....#....#............#....#..#"
    "..#........#..#....#..#..#...#."
    ".#......##....#..........#....#"
    "#.##.....#..........#.###.#...."
    "....##...#.....#.#......#.##..."
    "#.#.....#.......###.###..#..#.#"
    "..###..##.............#.####.##"
    "#....#.....#....#..##.......#.."
    ".....#....#...#.#.#.#..#...#.##"
    "...#.....#..#....###......#.#.#"
    "##.........#.#..#..#.#..#.....#"
    ".#.....#.#....#.........##..#.#"
    ".#.#..#.###..#..#..........#..."
    ".##....#.#.#...#......##.....#."
    "#.#....#....#...#...##...#..#.."
    "#...#........#....#....#......#"
    "#......#...#..#.#.##.....##..#."
    "....#...#......##...#..#....#.."
    ".#......##.##.......#.......#.."
    ".#...#..####...........#.#.#..."
    ".........#...#.#.........#....."
    "#.##.....#.#..#.#.###...###..#."
    "#...##.###......#.###..##.#.##."
    "...##.#.....#....#..#......#..."
    "#....###.#..#...##.....#......#"
    "........###...#...#............"
    "........#....#...#...#....#...#"
    "#....#..#..#....#.#........#.#."
    "##...#.....#.#..........#..#..#"
    "#.#...##.....#........#...#...#"
    "##.#.#.......#...#..#.###....#."
    ".#.......#....##..##...#.....#."
    "#....#....#.....#.......#......"
    ".##.##.##...##...#.#.#..#..#..."
    "#..#..#.##....#......##....###."
    ".......#.#.........#..##.#...##"
    ".#..##...#....#.....#.........."
    "..#.#...#......#.#..#.........."
    ".##....#.#.#.##.......###...#.."
    "..##.#...#.#.#.#.......#..#...."
    "#..#.......#...#........#.....#"
    ".....#.......#......###..#....."
    "...##.#.......#.....##.....##.."
    "##..#.......#.#.....#....#....."
    "..#....#.##.##...#...#......#.."
    ".#..#.###.#....###........#...#"
    "....##.##...##..#..#.#....#...."
    "..###...##.....##.............."
    "#....#...##...#....#..........#"
    ".##........#......##...##...#.#"
    "..#.#.##..........#......#....."
    "...#...#.........#.##........##"
    "..#.#..#.#..#...#....#...#....."
    "...##...#..#.###.#..#.#...#...."
    "....###........#..#..##...#...."
    "#.#....##.......#.#........#..."
    ".###...#..#.#.#.#..#...#..##.##"
    "..#.........#####.#......#..#.."
    "#.....#.....##..#....#...#...#."
    "...#..#....##....##.....##.#..."
    ".........#............#.##....."
    "....##.#..#....#.##.......#..##"
    ".###....#.#..#......#.#.......#"
    ".###...###.#.........#.#..#...#"
    ".....#........#..#.#..#.#..##.#"
    ".###..#....##.........#..##...."
    "..#.......#..#..##...#.###.#..."
    "#.......#...........#.#...#.###"
    "#.##.##...##.#...##..#.....#..."
    "..#..#........###.#.....##....."
    "#.....##....#...##...####..#..#"
    "....#........#...#...#........."
    "......#.#.#.#.......#..#.....##"
    "..#..#....#.....#.#...##......#"
    "..#....#...#.###.........#.###."
    "...#......##..#.#.....#...#...."
    "...#.......#...#...#........##."
    "............#...#..#....#.....#"
    "....##......................#.."
    "#.#.#....#....#..........##...."
    "#.#.....#.#.##..#...#.##....##."
    "...#...#..#...#..#.#.#.......#."
    "#.....#..........#.........##.#"
    "#...##..#..#.#.......###....#.."
    ".#...#..##....#.....##.......#."
    "....#.##.....#.........#.#....#"
    "........#.#...####..#.......#.#"
    ".####...#.#......####.....#.##."
    "###..#....#..#.......#.#..##..#"
    "#......#.#....##..#.##.#....#.#"
    "...###...#...#..##.#..#..#.#..."
    "...##..##....#..#.....#........"
    ".....#..............#......#..#"
    "......#....#......#..#........."
    "#..#.....#.##...........##....."
    ".#..#.#..................##...."
    "#.#..#..##...#....#.#......#..."
    ".##.#.##......#.##...#...#...#."
    "..#...#.........#.#..#.#....#.."
    ".#.####.#..#.#......##.#..#...."
    "#..#.......#....#.............."
    "....#............#..#.........."
    ".....#####.....#.....#..##...##"
    "#.#....#.#...............#..##."
    ".#.#..#...#......#.....#.#.#..."
    ".#....#.#.#......#.....##....#."
    "....#....#.##..#.......###...##"
    ".....#..#.##...#...#...#..#.#.."
    "##..#........#.#..#..##......#."
    ".#..#..##.......#..#.....#....."
    ".#.#.....###..##.#.#..........."
    "..##..##.####..........#..#...."
    "..##..#..#...#....#......#.#..."
    "#...#.#......##.....##.#..###.."
    "#..#..............#........##.#"
    ".........#.##..#.#..#..##.##.#."
    "#....##....#.#..#.#...##..#...."
    ".#....#.......#............##.."
    ".......#.#.......#...#.#......#"
    "......##...#.......#.#........#"
    "..###..#.#.##....##...#....##.."
    "..##.##..........##..###......."
    ".#.#.#..#..#.#.......#.#...##.."
    "..#..##.........#.###..#......#"
    "....#.#.#...##.#...#...##..###."
    "..###..##.........##...#...#..#"
    ".#..##...#.......#.......#..#.#"
    "........##....##....#.#.###.#.#"
    "#.....#.#.................#.#.."
    "....#.#.#.....##.####.#......#."
    "....#.......#.#.##.##.........."
    "...#...........#...#.##...#.###"
    "#....#....#..........#.##......"
    "##..#...........##.....##.##..."
    ".#.##...##..##....#..#.....####"
    "#...#...#.##..........##..##..."
    "....##..#....#.....#.#...#....#"
    "..#....#..##...###.#.#........."
    "#......#.#.#...#...#.........#."
    "#............###.#.#.#..##...#."
    ".##.....####...##..##..#..##.#."
    "#..#........#.....#.#.....#...#"
    "#............#....#.#.#........"
    "......##...##.#....#.....#...#."
    "..#........##......#.#.....##.."
    ".#..#..#.....##.......#..#.#..#"
    ".#....#..#....##.#.#.#..#..#.##"
    ".####.#..........#...#..##....."
    "...###..###...##..#............"
    "#..#.....##.#...#..##..#......."
    ".....##....#...###.##...#......"
    "...##..#...#..#..##....##....#."
    "...###....#.###.#.#.##....#...."
    "##.#.#.....#....#.#....#..#...."
    ".......##.....#.#..##...##...#."
    ".#....#.#...##.#..#....#.....#."
    "..#...#..#...#.##........#...#."
    "#....#......##.#....##...#.#..#"
    ".....#..#..#..#......#...#.#.#."
    "..###....#........#...#.......#"
    "###...#.......#.#.......##.##.."
    "......##.....#.#........#....#."
    "#.##..#.#.#.#..#....#.##.....#."
    "..........#.##.#...#...#..#..#."
    "..#...##.#..........#..##.###.."
    "..###..##.##..#.#...##.####..#."
    "#.#.#...............##....###.#"
    "....#.........#.#....#.#....#.#"
    "..#...#.###...#....###.....#..."
    "..#..#....#...#............#..."
    ".#..#....#..##.....##.........."
    "..#....#.#...#.#.#.#.......##.#"
    ".........#....##........#.#...."
    "...#..##.#..#.##...#...#.#....#"
    "....####...#...####.#....###..#"
    "......##...#.##.#.......#..#..."
    "#.#...#.#...#.#...#....#.#.#..."
    ".#.....##...#.....###.#....#..."
    "......##.....###...#.#...#.#..."
    "#..#..##.#.#......#....#..#..#."
    "....#.###.....#..#...#.##.....#"
    "##.##........#......#....#..##."
    "##.....##.#.....#.....##.....#."
    ".....#.##...#.#..#.#.#.....#..."
    ".#.##..#...#.#..#.....#.#......"
    ".....##.......#..#...##..#..#.."
    "#.....#..#.####......#........#"
    ".#..#..##.#..##............#..#"
    ".##..#.#....##.##.....#......#."
    ".......##.........#..#........."
    ".#...#.......................#."
    "#......#.#....##.#.......#..#.."
    "..##..##......#.......#....#.#."
    "##......#......##...##........."
    "..#....####....#.#.....##.#.#.."
    "..........#..#.#.#.....#..#.#.."
    "##..##...........##.......#...."
    "##....#.#....#..#......###....#"
    "...#.#.#..#.......##.......#..."
    "#....#.......#.......#........."
    "...##......##....#...#......#.#"
    "#......#####.#.........#.....#."
    "#..#.............#..#....#...#."
    ".......#.##..#..#..#..#....####"
    "......#.##..##..........###...#"
    ".#.##....###..#........#....##."
    "#......#..#...###.#...#.....#.."
    ".#.#.......#....##.......#.#..."
    "..#.##..#..##.....#.........#.#"
    "#.#...#..#.##....#.......##...."
    ".#.....###....#.#..#...#.....#."
    "#...#..#.......#.#.....##...#.#"
    "#.#####.........#....##.....#.."
    "#....#..##...#....#.##.......#."
    ".#.#.........##....##....#....."
    "...#..##.......#....#.#.#......"
    "#.###.##...###....#.....#.####."
    ".#...#.#.#..##.#..........#...."
    "#.#.....#.##.#..####.....##.#.."
    "...###.##..####.......#......##"
    ".##..#.........#...#.#.....#.##"
    "..#.....##....###.....#.#...##."
    "#....#....#..#....#.##........."
    "......###....#.#..#..#....##..."
    ".#.#................#.......##."
    "...#.......#.........#.#......."
    "...#..........#...##.....###..."
    "....#......#...#..............."
    ".##...#....#.....#.##......#..."
    ".#.....###...##..##...#.#......"
    "....##........#.....#...#....#."
    "#.........#.#...##...#.#..#...."
    "...#.#.....#.#........#.#....#."
    ".#........#.....#.#.#.#.#..#..."
    "....#...#.....#.#....#........#"
    "..###.#....#.#....##...##..#.##"
    ".#....#.#.####.#.#.....#......."
    ".#...#...#.................##.#"
    "..................##..#..#.#.#."
    ".#..#............##....###....."
    ".......#....#...........#......"
    "....#.#.#.....###.........#..##"
    "...#.#....#.#.##.#.##.....##..#"
    ".#.##.#...##...#.......#.....##"
    ".#............#...#..##...#.#.#"
    "#.##..#.##..#..##.###.#........"
    "..............##....#...#..#.#."
    ".#.#...#.#....#....###........#"
    ".#....#.#....#......###........"
    "..#.......##......#.##.....#..."
    ".....#......#..#...#.#.....#...";


size_t check_slope(size_t run, size_t rise)
{
    size_t line = 1;
    size_t idx = 0, trees = 0;
    do {
        idx += run + LINE_LEN * rise;
        line += rise;
        if(idx > LINE_LEN * line - 1)
            idx -= LINE_LEN;
        if(INPUT[idx] == '#')
            ++trees;
    } while(line < sizeof INPUT / LINE_LEN);
    return trees;
}

int main(void)
{
    clock_t start = clock();
    size_t p1 = check_slope(3, 1);
    size_t p2 = check_slope(1, 1) * p1 * check_slope(5, 1) * check_slope(7, 1) * check_slope(1, 2);
    clock_t end = clock();
    printf("%lf ms\n", ((double) (end - start)) / CLOCKS_PER_SEC * 1000);
}
